(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{420:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBrandPageContext=void 0;t.getBrandPageContext=function(e){var t=e.brandPageSlug,r=(e.brandPageToken,e.stripePublishableKey),n=e.isProduction,o=e.pageTitle;e.pages;return{isTemplate:!1,isPreview:!1,brandPageSlug:t,stripePublishableKey:r,isProduction:n,runtimeEnvironment:"production",pageTitle:o,currentPageSlug:e.currentPageSlug,customDomain:e.customDomain,brandPageType:e.brandPageType,brandPageToken:e.brandPageToken,pages:e.pages}}},421:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(input){if(!("string"==typeof input||input instanceof String)){var e=n(input);throw null===input?e="null":"object"===e&&(e=input.constructor.name),new TypeError("Expected a string but received a ".concat(e))}},e.exports=t.default,e.exports.default=t.default},424:function(e,t,r){"use strict";r(59);var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var desc=Object.getOwnPropertyDescriptor(t,r);desc&&!("get"in desc?!t.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,desc)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var p in e)"default"===p||Object.prototype.hasOwnProperty.call(t,p)||n(t,e,p)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(432),t),o(r(433),t),o(r(434),t)},425:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var r in t)void 0===e[r]&&(e[r]=t[r]);return e},e.exports=t.default,e.exports.default=t.default},429:function(e,t,r){"use strict";var n=r(216),o=r(217);r(58),r(29),r(218),r(44),r(220),r(11),Object.defineProperty(t,"__esModule",{value:!0}),t.getAsyncDataAsync=void 0;var c=r(430),l=r(435),d=r(138),f=r(420),_=r(424),v=r(440),m=function(){var e=o(regeneratorRuntime.mark((function e(t,r){var o,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$brandPageApi.searchActiveCustomDomainsAsync({domainName:r,limit:1});case 2:if(o=e.sent,c=o.customDomains,l=n(c,1),d=l[0]){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",d);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),y=function(){var e=o(regeneratorRuntime.mark((function e(t,r){var n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$brandPageApi,e.next=3,n.searchActiveCustomDomainsAsync({brandPageToken:r,limit:1});case 3:return o=e.sent,c=o.customDomains,e.abrupt("return",c[0]);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),P=function(){var e=o(regeneratorRuntime.mark((function e(t){var r,content;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return content=(0,l.scrubCustomerInformation)(JSON.parse(t.brandPageData)),e.abrupt("return",d.brandPageUtils.getBrandPageViewModelFromBrandPageModel(new d.BrandPageModel(content),t.brandPageToken,!1!==(null===(r=t.brandPageFeatures)||void 0===r?void 0:r.showBrandCrowdLogo)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){var t=e.ctx,r=e.host,n=e.slug,o=e.isCustomDomain,c=e.response,l=e.viewModel,_=e.pageSlug,m=t.$csrf,y=t.$config,P=t.error,x=t.redirect,h=t.req,w=t.res,S=function(e,t){if(e.brandPageTitle)return e.brandPageTitle;var r=t.brandPageType===d.BRAND_PAGE_TYPES.brandSite?v.BRANDSITE_DISPLAY_TEXT:v.BRANDPAGE_DISPLAY_TEXT;return"My ".concat(r)}(c,l),T=function(e,t,r,n){var o="https://".concat(e.split(":")[0]);return n||(o="".concat(o,"/").concat(t)),r&&(o="".concat(o,"/").concat(r)),o}(r,n,_,o);return!o&&_&&l.pages[0].slug===_?(x({name:"slug",params:{slug:n}}),{}):(_||(_=l.pages[0].slug),l.pages.find((function(p){return p.slug===_}))?{context:(0,f.getBrandPageContext)({brandPageSlug:n,brandPageToken:l.brandPageToken,isProduction:y.isProduction,pageTitle:S,stripePublishableKey:y.stripePublishableKey,currentPageSlug:_,customDomain:o?h.headers.host:void 0,brandPageType:l.brandPageType,pages:l.pages}),csrfToken:m.createToken(h,w),viewModel:l,brandPageTitle:S,pageDescription:c.brandPageDescription?c.brandPageDescription:void 0,pageKeywords:c.brandPageMetaKeywords?c.brandPageMetaKeywords:void 0,url:T,previewUrl:c.brandPageLogoDraftPreviewImageUrl}:(P({statusCode:404}),{}))},h=function(){var e=o(regeneratorRuntime.mark((function e(t,r,n){var o,c,l,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.$brandCrowdApi,c=t.error,e.next=3,m(t,r);case 3:if(l=e.sent){e.next=7;break}return c({statusCode:404}),e.abrupt("return",{});case 7:return e.next=9,o.getBrandPageByBrandPageTokenAsync(l.brandPageToken);case 9:if(d=e.sent){e.next=13;break}return c({statusCode:404}),e.abrupt("return",{});case 13:return e.next=15,P(d);case 15:return f=e.sent,e.abrupt("return",x({ctx:t,host:r,slug:d.brandPageSlug,pageSlug:n,isCustomDomain:!0,response:d,viewModel:f}));case 17:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),w=function(){var e=o(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.redirect,e.next=3,y(t,r);case 3:if(!(o=e.sent)){e.next=7;break}return n("https://".concat(o.domainName)),e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),S=function(){var e=o(regeneratorRuntime.mark((function e(t,r,n,o){var l,d,f,v,m,y,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=t.$brandCrowdApi,d=t.$config,f=t.error,v=t.redirect,m=(0,c.getWebsiteTypeByHost)(r),n){e.next=5;break}return v(d.brandCrowdHomeUrl),e.abrupt("return",{});case 5:e.t0=m,e.next=e.t0===_.WEBSITE_TYPES.brandpage?8:e.t0===_.WEBSITE_TYPES.brandsite?12:16;break;case 8:return e.next=10,l.getBrandPageBySlugAsync(n);case 10:case 14:return y=e.sent,e.abrupt("break",16);case 12:return e.next=14,l.getBrandSiteBySlugAsync(n);case 16:if(y){e.next=19;break}return f({statusCode:404,message:"Website page not found"}),e.abrupt("return",{});case 19:return e.next=21,w(t,y.brandPageToken);case 21:if(!e.sent){e.next=23;break}return e.abrupt("return",{});case 23:return e.next=25,P(y);case 25:return h=e.sent,e.abrupt("return",x({ctx:t,host:r,slug:n,pageSlug:o,isCustomDomain:!1,response:y,viewModel:h}));case 27:case"end":return e.stop()}}),e)})));return function(t,r,n,o){return e.apply(this,arguments)}}(),T=function(){var e=o(regeneratorRuntime.mark((function e(t){var r,n,o,l,d,f,_,v,m,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.error,l=t.req,d=t.route,e.prev=1,f=l.headers.host,_=d.params,v=_.slug,m=_.pageSlug,!(0,c.isCustomDomainByHost)(f)){e.next=7;break}return e.abrupt("return",h(t,f,v));case 7:return e.abrupt("return",S(t,f,v,m));case 10:return e.prev=10,e.t0=e.catch(1),404!==(null===(r=e.t0.response)||void 0===r?void 0:r.status)&&console.error(e.t0),y=(null===(n=e.t0.response)||void 0===n?void 0:n.status)||500,o({statusCode:y}),e.abrupt("return",{});case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();t.getAsyncDataAsync=T},430:function(e,t,r){"use strict";r(222),r(29),r(218),Object.defineProperty(t,"__esModule",{value:!0}),t.getWebsiteTypeByHost=t.isBrandSiteHost=t.isBrandPageHost=t.isCustomDomainByHost=void 0;var n=r(431),o=r(424);t.isCustomDomainByHost=function(e){return!(0,t.isBrandPageHost)(e)&&!(0,t.isBrandSiteHost)(e)};t.isBrandPageHost=function(e){return e.split(":")[0].toLocaleLowerCase().endsWith(n.BRAND_PAGE_HOST)};t.isBrandSiteHost=function(e){return e.split(":")[0].toLocaleLowerCase().endsWith(n.BRAND_SITE_HOST)};t.getWebsiteTypeByHost=function(e){if((0,t.isBrandPageHost)(e))return o.WEBSITE_TYPES.brandpage;if((0,t.isBrandSiteHost)(e))return o.WEBSITE_TYPES.brandsite;throw new Error("Unsupported host: ".concat(e))}},431:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BRAND_SITE_HOST=t.BRAND_PAGE_HOST=void 0,t.BRAND_PAGE_HOST="brand.page",t.BRAND_SITE_HOST="brand.site"},432:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WEBSITE_TYPES=void 0,t.WEBSITE_TYPES={brandpage:"brandpage",brandsite:"brandsite"}},433:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},434:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},435:function(e,t,r){"use strict";var n=r(223),o=r(216);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(36),r(11),r(34),r(221),r(45),r(33),r(35),r(59),r(60);var d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.scrubCustomerInformation=void 0;var f=d(r(436)),_={"contact-form":{field:"responseEmail",scrubFunction:function(e){return(0,f.default)(e)?void 0:""}}},v=function(e){return null==e?void 0:e.map((function(e){var t={};return Object.entries(e).forEach((function(r){var n,c=o(r,2),l=c[0],d=c[1];(null===(n=_[e.type])||void 0===n?void 0:n.field)!==l?t[l]=d:t[l]=_[e.type].scrubFunction(d)})),t}))};t.scrubCustomerInformation=function(data){var e=data.contents?v(data.contents):null,t=data.pages?data.pages.map((function(p){return l(l({},p),{},{contents:v(p.contents)})})):null;return l(l(l({},data),e&&{contents:e}),t&&{pages:t})}},436:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,n.default)(e),(t=(0,o.default)(t,_)).require_display_name||t.allow_display_name){var r=e.match(v);if(r){var f=r[1];if(e=e.replace(f,"").replace(/(^<|>$)/g,""),f.endsWith(" ")&&(f=f.substr(0,f.length-1)),!function(e){var t=e.replace(/^"(.+)"$/,"$1");if(!t.trim())return!1;if(/[\.";<>]/.test(t)){if(t===e)return!1;if(!(t.split('"').length===t.split('\\"').length))return!1}return!0}(f))return!1}else if(t.require_display_name)return!1}if(!t.ignore_max_length&&e.length>w)return!1;var S=e.split("@"),T=S.pop(),D=T.toLowerCase();if(t.host_blacklist.includes(D))return!1;var E=S.join("@");if(t.domain_specific_validation&&("gmail.com"===D||"googlemail.com"===D)){var A=(E=E.toLowerCase()).split("+")[0];if(!(0,c.default)(A.replace(/\./g,""),{min:6,max:30}))return!1;for(var B=A.split("."),i=0;i<B.length;i++)if(!y.test(B[i]))return!1}if(!(!1!==t.ignore_max_length||(0,c.default)(E,{max:64})&&(0,c.default)(T,{max:254})))return!1;if(!(0,l.default)(T,{require_tld:t.require_tld})){if(!t.allow_ip_domain)return!1;if(!(0,d.default)(T)){if(!T.startsWith("[")||!T.endsWith("]"))return!1;var F=T.substr(1,T.length-2);if(0===F.length||!(0,d.default)(F))return!1}}if('"'===E[0])return E=E.slice(1,E.length-1),t.allow_utf8_local_part?h.test(E):P.test(E);for(var pattern=t.allow_utf8_local_part?x:m,O=E.split("."),k=0;k<O.length;k++)if(!pattern.test(O[k]))return!1;if(t.blacklisted_chars&&-1!==E.search(new RegExp("[".concat(t.blacklisted_chars,"]+"),"g")))return!1;return!0};var n=f(r(421)),o=f(r(425)),c=f(r(437)),l=f(r(438)),d=f(r(439));function f(e){return e&&e.__esModule?e:{default:e}}var _={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[]},v=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,m=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,y=/^[a-z\d]+$/,P=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,x=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,h=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,w=254;e.exports=t.default,e.exports.default=t.default},437:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r,n;(0,o.default)(e),"object"===c(t)?(r=t.min||0,n=t.max):(r=arguments[1],n=arguments[2]);var l=encodeURI(e).split(/%..|./).length-1;return l>=r&&(void 0===n||l<=n)};var n,o=(n=r(421))&&n.__esModule?n:{default:n};function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}e.exports=t.default,e.exports.default=t.default},438:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,n.default)(e),(t=(0,o.default)(t,l)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));!0===t.allow_wildcard&&0===e.indexOf("*.")&&(e=e.substring(2));var r=e.split("."),c=r[r.length-1];if(t.require_tld){if(r.length<2)return!1;if(!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(c))return!1;if(/\s/.test(c))return!1}if(!t.allow_numeric_tld&&/^\d+$/.test(c))return!1;return r.every((function(e){return!(e.length>63)&&(!!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)&&(!/[\uff01-\uff5e]/.test(e)&&(!/^-|-$/.test(e)&&!(!t.allow_underscores&&/_/.test(e)))))}))};var n=c(r(421)),o=c(r(425));function c(e){return e&&e.__esModule?e:{default:e}}var l={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1};e.exports=t.default,e.exports.default=t.default},439:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,o.default)(t),!(r=String(r)))return e(t,4)||e(t,6);if("4"===r){return!!d.test(t)&&t.split(".").sort((function(a,b){return a-b}))[3]<=255}if("6"===r)return!!_.test(t);return!1};var n,o=(n=r(421))&&n.__esModule?n:{default:n};var c="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",l="(".concat(c,"[.]){3}").concat(c),d=new RegExp("^".concat(l,"$")),f="(?:[0-9a-fA-F]{1,4})",_=new RegExp("^("+"(?:".concat(f,":){7}(?:").concat(f,"|:)|")+"(?:".concat(f,":){6}(?:").concat(l,"|:").concat(f,"|:)|")+"(?:".concat(f,":){5}(?::").concat(l,"|(:").concat(f,"){1,2}|:)|")+"(?:".concat(f,":){4}(?:(:").concat(f,"){0,1}:").concat(l,"|(:").concat(f,"){1,3}|:)|")+"(?:".concat(f,":){3}(?:(:").concat(f,"){0,2}:").concat(l,"|(:").concat(f,"){1,4}|:)|")+"(?:".concat(f,":){2}(?:(:").concat(f,"){0,3}:").concat(l,"|(:").concat(f,"){1,5}|:)|")+"(?:".concat(f,":){1}(?:(:").concat(f,"){0,4}:").concat(l,"|(:").concat(f,"){1,6}|:)|")+"(?::((?::".concat(f,"){0,5}:").concat(l,"|(?::").concat(f,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");e.exports=t.default,e.exports.default=t.default},440:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BRANDSITE_DISPLAY_TEXT=t.BRANDPAGE_DISPLAY_TEXT=void 0,t.BRANDPAGE_DISPLAY_TEXT="BrandPage",t.BRANDSITE_DISPLAY_TEXT="BrandSite"}}]);